(this["webpackJsonpgithub-follow"]=this["webpackJsonpgithub-follow"]||[]).push([[0],{47:function(e,t,a){e.exports=a.p+"static/media/spinner.f6d9fc27.gif"},48:function(e,t,a){e.exports=a.p+"static/media/undraw_followers_4i0p.d3b8fe5b.png"},50:function(e,t,a){e.exports=a.p+"static/media/undraw_about_us_page_ee1k.c9f4e1df.png"},55:function(e,t,a){e.exports=a(87)},60:function(e,t,a){},86:function(e,t,a){},87:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(19),c=a.n(o),l=(a(60),a(15)),s=a(3),i=a(16),u=a(47),m=a.n(u),g=function(){return r.a.createElement(n.Fragment,null,r.a.createElement("img",{src:m.a,alt:"Loading ...",style:{width:"200px",margin:"auto",display:"block"}}))},p=Object(n.createContext)(),d=a(102),f=function(e){var t=e.count,a=e.onPageChange,n=e.page;return r.a.createElement("div",null,r.a.createElement(d.a,{className:"my-3",count:t,page:n,siblingCount:2,boundaryCount:2,variant:"outlined",shape:"rounded",size:"large",color:"primary",onChange:function(e,t){a(t)}}))},b=function(){var e=Object(n.useContext)(p),t=e.isLoggedIn,a=e.loading,o=e.users,c=e.fetchUsers,l=e.followUser,u=e.disabled,m=e.setLoading,d=e.currentUser,b=Math.ceil(200/9),E=Object(n.useState)(1),h=Object(i.a)(E,2),O=h[0],y=h[1],w=Object(n.useState)(null),S=Object(i.a)(w,2),k=S[0],v=S[1];return Object(n.useEffect)((function(){c(9,O)}),[O]),t?a?r.a.createElement(g,null):r.a.createElement("div",{className:"about"},r.a.createElement("h2",{className:"h2-about"},"Users"),r.a.createElement("h4",null,"Hi, ",d.name,"!"),r.a.createElement("ul",{className:"grid-3 "},o.length>0&&o.map((function(e){return r.a.createElement("li",{key:e.id,className:"card"},r.a.createElement("img",{src:e.owner.avatar_url,alt:"usr-img",className:"card-img"}),r.a.createElement("h3",{className:"card-h1"},e.owner.login),r.a.createElement("button",{disabled:u,className:"card-follow btn-sm ".concat(k===e.owner.login?"disabled":""),onClick:function(){v(e.owner.login),l(e.owner.login)}},"FOLLOW"),r.a.createElement("a",{href:"https://github.com/".concat(e.owner.login),className:"card-repo"},r.a.createElement("button",{className:"repo-btn"},"Github Profile")))}))),r.a.createElement("div",{className:"pagination"},r.a.createElement(f,{page:O,count:b,onPageChange:function(e){m(),y(e),window.scrollTo({top:0,behavior:"smooth"})}}))):r.a.createElement(s.a,{to:"/login"})},E=a(49),h=a.n(E),O=a(48),y=a.n(O),w=function(){var e=Object(n.useContext)(p),t=e.isLoggedIn,a=e.loading,o=e.client_id,c=e.redirect_uri,l=e.client_secret,i=e.proxy_url,u=e.loginUser;return Object(n.useEffect)((function(){var e=window.location.href;if(e.includes("?code=")){var t=e.split("?code=");window.history.pushState({},null,t[0]);var a={client_id:o,redirect_uri:c,client_secret:l,code:t[1]};u(i,a)}}),[]),t?r.a.createElement(s.a,{to:"/"}):r.a.createElement("div",{className:"about"},r.a.createElement("h2",{className:"h2-about"},"Github Users"),r.a.createElement("img",{src:y.a,alt:"login img",className:"img-about"}),r.a.createElement("section",{className:"login-container"},a?r.a.createElement(g,{style:{width:"100px"}}):r.a.createElement("a",{className:"btn display",href:"https://github.com/login/oauth/authorize?scope=user&client_id=".concat(o,"&redirect_uri=").concat(c)},r.a.createElement("span",{style:{paddingRight:"1em"}},r.a.createElement(h.a,null)),r.a.createElement("span",null,"Login To Github"))))},S=a(4),k=a(18),v=a.n(k),_=a(29),N=function(e,t){switch(t.type){case"LOGIN_USER":return localStorage.setItem("isLoggedIn",JSON.stringify(t.payload.isLoggedIn)),localStorage.setItem("token",JSON.stringify(t.payload.token)),localStorage.setItem("currentUser",JSON.stringify(t.payload.currentUser)),Object(S.a)(Object(S.a)({},e),{},{isLoggedIn:t.payload.isLoggedIn,currentUser:t.payload.currentUser,token:t.payload.token,loading:!1});case"LOGOUT_USER":return localStorage.clear(),Object(S.a)(Object(S.a)({},e),{},{isLoggedIn:!1,currentUser:null,token:null,loading:!1});case"SET_LOADING":return Object(S.a)(Object(S.a)({},e),{},{loading:!0});case"SET_ALERT":return Object(S.a)(Object(S.a)({},e),{},{loading:!1,alert:t.payload});case"REMOVE_ALERT":return Object(S.a)(Object(S.a)({},e),{},{alert:null,loading:!1});case"SET_FORKS":return Object(S.a)(Object(S.a)({},e),{},{forks:t.payload.forks,loading:!1});case"SET_USERS":return Object(S.a)(Object(S.a)({},e),{},{users:t.payload.users,loading:!1});case"SET_DISABLED":return Object(S.a)(Object(S.a)({},e),{},{disabled:t.payload.disabled});default:return e}},j=a(30),L=a.n(j),U=function(e){var t={currentUser:JSON.parse(localStorage.getItem("currentUser"))||null,isLoggedIn:JSON.parse(localStorage.getItem("isLoggedIn"))||!1,token:JSON.parse(localStorage.getItem("token"))||null,loading:!1,alert:null,disabled:!1,forks:0,users:[],client_id:"35705311f7ed52252bd1",redirect_uri:"http://localhost:3000/login",client_secret:"1ac1cfe183b92680f8cb927b7acdd257bf60358c",proxy_url:"/authenticate"},a=Object(n.useReducer)(N,t),o=Object(i.a)(a,2),c=o[0],l=o[1],s=function(){l({type:"SET_LOADING"})},u=function(e){l({type:"SET_DISABLED",payload:{disabled:e}})},m=function(e,t){l({type:"SET_ALERT",payload:{msg:e,type:t}}),setTimeout((function(){l({type:"REMOVE_ALERT"})}),1500)},g=function(){var e=Object(_.a)(v.a.mark((function e(t){return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return u(!0),e.next=3,L.a.put("https://api.github.com/user/following/".concat(t),{},{headers:{authorization:"token ".concat(c.token)}});case 3:l({type:"FOLLOW_USER"}),m("Followed ".concat(t,"!"),"success"),u(!1);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),d=function(){var e=Object(_.a)(v.a.mark((function e(t,a){var n;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s(),e.next=3,L.a.get("https://api.github.com/repos/facebook/react/forks?per_page=".concat(t,"&page=").concat(a),{headers:{authorization:"token ".concat(c.token)}});case 3:n=e.sent,l({type:"SET_USERS",payload:{users:n.data}});case 5:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),f=function(){var e=Object(_.a)(v.a.mark((function e(){var t;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s(),e.next=3,L.a.get("https://api.github.com/repos/facebook/react",{authorization:"token: ".concat(c.token)});case 3:t=e.sent,l({type:"SET_FORKS",payload:{forks:t.data.forks_count}});case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return r.a.createElement(p.Provider,{value:Object(S.a)(Object(S.a)({},c),{},{logoutUser:function(){l({type:"LOGOUT_USER"}),m("Logged Out!","success")},loginUser:function(e,t){s(),fetch(e,{method:"POST",body:JSON.stringify(t)}).then((function(e){return e.json()})).then((function(e){var t=e.response,a=t.avatar_url,n=t.bio,r=t.blog,o=t.email,c=t.followers,s=t.following,i=t.location,u=t.name,g=t.login;l({type:"LOGIN_USER",payload:{currentUser:{avatar_url:a,bio:n,blog:r,email:o,followers:c,following:s,location:i,name:u,login:g},isLoggedIn:!0,token:e.token}}),m("Login successfull!","success")})).catch((function(e){m("Login failure!","danger")}))},setLoading:s,showAlert:m,setForks:f,fetchUsers:d,followUser:g,setDisabled:u})},e.children)},x=function(e){var t=e.icon,a=e.title,o=Object(n.useContext)(p),c=o.isLoggedIn,s=o.logoutUser;return r.a.createElement("nav",{className:"navbar bg-primary"},r.a.createElement("h1",null,r.a.createElement("a",{href:c?"/":"/login"}," ",r.a.createElement("i",{className:t})," ",a)),r.a.createElement("ul",null,!c&&r.a.createElement("li",null,r.a.createElement(l.b,{to:"/login"},"Login")),c&&r.a.createElement("li",null,r.a.createElement(l.b,{to:"/"},"Home")),r.a.createElement("li",null,r.a.createElement(l.b,{to:"/about"},"About")),c&&r.a.createElement("li",null,r.a.createElement(l.b,{to:"/login",onClick:function(){s()}},"Logout"))))};x.defaultProps={title:"Github App",icon:"fab fa-github"};var I=x,T=function(){var e=Object(n.useContext)(p).alert;return null!==e&&r.a.createElement("div",{className:"alert alert-".concat(e.type)}," ",r.a.createElement("i",{className:"fas fa-info-circle",style:{paddingRight:"1em"}}),e.msg)},R=a(50),A=a.n(R),C=function(){var e=Object(n.useContext)(p),t=e.loading,a=e.forks,o=e.setForks;return console.log(a),Object(n.useEffect)((function(){o()}),[]),t?r.a.createElement(g,null):r.a.createElement("div",{className:"about"},r.a.createElement("h2",{className:"h2-about"},"About section"),r.a.createElement("img",{src:A.a,alt:"about us",className:"img-about"}),r.a.createElement("p",null,"This github webapp allows a user to login using his github credentials. Once logged in user can check out people who have forked the"," ",r.a.createElement("strong",null,r.a.createElement("a",{href:"https://github.com/facebook/react"},"React")," "),"repo by ",r.a.createElement("strong",null,"Facebook.")," ","Currently, I am displaying 200 people out of the total"," ",r.a.createElement("strong",{className:"text-primary strong"},"".concat(a))," people who have forked the repo."))},G=function(){return r.a.createElement("footer",null,r.a.createElement("p",{className:"footer-p"},"\xa9 Parul Malhotra"),r.a.createElement("p",null,r.a.createElement("a",{className:"footer-p",href:"https://github.com/malhotra-parul/github-users-app"},r.a.createElement("i",{className:"fab fa-github fa-2x"})," ",": Github Repo")))};a(86);var F=function(){return r.a.createElement(U,null,r.a.createElement(l.a,null,r.a.createElement("div",{className:"App"},r.a.createElement(I,{title:"GitHub App"}),r.a.createElement("div",{className:"container"},r.a.createElement(T,{alert:alert}),r.a.createElement(s.d,null,r.a.createElement(s.b,{exact:!0,path:"/",component:b}),r.a.createElement(s.b,{exact:!0,path:"/login",component:w}),r.a.createElement(s.b,{exact:!0,path:"/about",component:C}))),r.a.createElement(G,null))))};c.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(F,null)),document.getElementById("root"))}},[[55,1,2]]]);
//# sourceMappingURL=main.ff2c8aeb.chunk.js.map